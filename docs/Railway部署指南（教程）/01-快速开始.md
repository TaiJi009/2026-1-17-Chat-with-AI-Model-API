# 快速开始

本指南将帮助您在 5 个步骤内快速部署后端服务到 Railway。

## 1. 创建 Railway 项目并连接 GitHub

1. 登录 [Railway](https://railway.app)
2. 点击 **"New Project"**
3. 选择 **"Deploy from GitHub repo"**
4. 授权 Railway 访问 GitHub（首次需要）
5. 选择您的仓库

## 2. 添加 PostgreSQL 数据库

1. 在 Railway 项目中点击 **"+ New"**
2. 选择 **"Database"** → **"Add PostgreSQL"**
3. Railway 会自动创建数据库并提供 `DATABASE_URL` 环境变量

## 3. 添加后端 Web Service

1. 点击 **"+ New"** → **"GitHub Repo"**
2. 选择同一个仓库
3. 在 **"Root Directory"** 中选择 `backend` 目录
4. Railway 会自动检测为 Node.js 项目

## 4. 配置环境变量

在 Railway 后端服务的 **Settings → Variables** 中添加所有必需的环境变量。

详细的环境变量配置说明请参考：[环境变量配置](03-环境变量配置.md)

### 必需的环境变量

```env
# 数据库（Railway PostgreSQL 自动提供，使用引用）
DATABASE_URL=${{PostgreSQL.DATABASE_URL}}

# JWT 配置
JWT_SECRET=your-secret-key-change-this
JWT_EXPIRES_IN=7d

# 服务器配置
PORT=${{PORT}}
NODE_ENV=production
CORS_ORIGIN=https://your-frontend-domain.com
```

## 5. 运行数据库迁移

首次部署后，运行数据库迁移：

```bash
railway run npm run migrate
```

或使用 Railway 控制台的终端功能运行迁移。

详细的迁移说明请参考：[数据库迁移](04-数据库迁移.md)

## 验证部署

1. 在服务页面查看部署状态
2. 等待构建完成（通常需要 1-3 分钟）
3. Railway 会提供一个默认域名，格式如：`your-service.railway.app`
4. 访问 `https://your-service.railway.app/health` 验证服务是否正常运行
5. 应该返回 JSON 响应：`{"success":true,"message":"服务运行正常",...}`

## 下一步

- 查看 [详细步骤](02-详细步骤.md) 了解更详细的部署说明
- 查看 [环境变量配置](03-环境变量配置.md) 了解完整的环境变量列表
- 查看 [故障排查](09-故障排查.md) 如果遇到问题
