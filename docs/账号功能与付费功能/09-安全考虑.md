# 09-安全考虑

## 1. 认证安全

- **JWT Token**: 使用强密钥，设置合理的过期时间（7天）
- **Token存储**: 优先使用HTTP-only Cookie，或localStorage + 定期刷新
- **密码**: 使用bcrypt哈希（虽然当前只有验证码登录）

## 2. 数据安全

- **SQL注入**: 使用参数化查询（Prisma/TypeORM）
- **XSS防护**: 前端输入验证和转义
- **敏感数据**: 不在日志中记录密码、Token等敏感信息

## 3. 支付安全

- **签名验证**: 严格验证微信支付回调签名
- **订单验证**: 验证订单金额、状态等关键信息
- **幂等性**: 确保支付回调的幂等性处理

## 4. 接口安全

- **CORS**: 配置允许的前端域名
- **Rate Limiting**: 限制API调用频率（特别是验证码接口）
- **HTTPS**: 生产环境必须使用HTTPS

## 5. Docker安全

- **镜像安全**: 使用官方基础镜像，定期更新
- **环境变量**: 敏感信息使用环境变量，不要硬编码
- **网络隔离**: 使用Docker网络隔离服务
- **数据持久化**: 使用Docker volumes存储数据
- **资源限制**: 配置容器资源限制（CPU、内存）

---

**相关文档**:
- [08-部署指南](./08-部署指南.md)
- [10-开发步骤](./10-开发步骤.md)
- [返回目录](./00-目录.md)
